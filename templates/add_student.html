<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Student - SAMS</title>

    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <style>
        body {
            background: #f5f7ff;
            font-family: "Poppins", sans-serif;
        }

        .container-box {
            max-width: 900px;
            margin: 40px auto;
            background: #fff;
            padding: 35px;
            border-radius: 16px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
        }

        h2 {
            text-align: center;
            font-weight: 700;
            color: #3f51b5;
            margin-bottom: 25px;
        }

        label {
            font-weight: 600;
            margin-top: 10px;
        }

        .btn-primary {
            background: #3f51b5;
            border: none;
            border-radius: 10px;
            padding: 10px 25px;
            font-weight: 600;
            transition: 0.3s;
        }

        .btn-primary:hover {
            background: #2c3aa8;
        }
    </style>
</head>

<body>

    <div class="container-box">

        <h2>Add New Student</h2>

        <form id="studentForm" action="/teacher/add_student" method="POST">

            <div class="row">

                <div class="col-md-6">
                    <label>Roll Number *</label>
                    <input type="text" name="roll_number" class="form-control" required>
                </div>

                <div class="col-md-6">
                    <label>First Name *</label>
                    <input type="text" name="first_name" class="form-control" required>
                </div>

                <div class="col-md-6">
                    <label>Last Name</label>
                    <input type="text" name="last_name" class="form-control">
                </div>

                <div class="col-md-6">
                    <label>Gender</label>
                    <select name="gender" class="form-control">
                        <option disabled selected>Select</option>
                        <option>Male</option>
                        <option>Female</option>
                        <option>Other</option>
                    </select>
                </div>

                <div class="col-md-6">
                    <label>Date of Birth</label>
                    <input type="date" name="dob" class="form-control">
                </div>

                <div class="col-md-6">
                    <label>Email</label>
                    <input type="email" name="email" class="form-control">
                </div>

                <div class="col-md-6">
                    <label>Phone</label>
                    <input type="text" name="phone" class="form-control">
                </div>

                <div class="col-md-12">
                    <label>Address</label>
                    <textarea name="address" rows="3" class="form-control"></textarea>
                </div>

                <div class="col-md-6">
                    <label>Program *</label>
                    <select name="program_id" class="form-control" required>
                        <option disabled selected>Select Program</option>
                        {% for p in programs %}
                        <option value="{{ p.program_id }}">{{ p.program_name }}</option>
                        {% endfor %}
                    </select>
                </div>

                <div class="col-md-6">
                    <label>Class *</label>
                    <select name="class_id" class="form-control" required>
                        <option disabled selected>Select Class</option>
                        {% for c in classes %}
                        <option value="{{ c.class_id }}">{{ c.class_name }}</option>
                        {% endfor %}
                    </select>
                </div>

                <div class="col-md-6">
                    <label>Status</label>
                    <select name="status" class="form-control">
                        <option>Active</option>
                        <option>Inactive</option>
                    </select>
                </div>

                <div class="col-md-6">
                    <label>Admission Date</label>
                    <input type="date" name="admission_date" class="form-control">
                </div>

            </div>

            <br>

            <div class="text-center">
                <button type="submit" class="btn btn-primary">Add Student</button>
            </div>

        </form>

    </div>


    <!-- ========================== -->
    <!-- SWEETALERT JS VALIDATION -->
    <!-- ========================== -->

    <script>
        document.getElementById("studentForm").addEventListener("submit", function (e) {

            const roll = document.querySelector("[name='roll_number']").value.trim();
            const fname = document.querySelector("[name='first_name']").value.trim();
            const program = document.querySelector("[name='program_id']").value;
            const class_id = document.querySelector("[name='class_id']").value;

            if (roll === "" || fname === "" || program === "" || class_id === "") {
                e.preventDefault();
                Swal.fire({
                    icon: "error",
                    title: "Required fields missing",
                    text: "Roll Number, First Name, Program, and Class are mandatory!"
                });
            }
        });
    </script>


    <!-- Flask Flash Messages â†’ SweetAlert -->
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <script>
                
                Swal.fire({
                    icon: "{{ category }}",
                    title: "{{ message }}",
                    timer: 2500,
                    showConfirmButton: false
                });
                
            </script>
        {% endif %}
    {% endwith %}

</body>

</html>
